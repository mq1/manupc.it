---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import bases from "../data/bases.json";

interface Props {
    id: string;
}

const { id } = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>(
    "/src/assets/*.{jpeg,jpg,png,gif}",
);

const imagePaths = bases[id].images;
---

<div class="carousel w-full">
    {
        imagePaths.map((path: string, i: number) => {
            if (!images[path])
                throw new Error(
                    `"${path}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`,
                );

            return (
                <div id={`${id}-${i}`} class="carousel-item w-full">
                    <Image
                        src={images[path]()}
                        alt={`${id}-${i}`}
                        class="w-full object-contain"
                    />
                </div>
            );
        })
    }
</div>
<div class="flex justify-center w-full py-2 gap-2">
    {
        imagePaths.map((path: string, i: number) => (
            <a href={`#${id}-${i}`} class="btn btn-xs">
                {i + 1}
            </a>
        ))
    }
</div>
